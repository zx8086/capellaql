# CapellaQL Application Configuration
# Pure OpenTelemetry logging - no file logging capability

# Base URL for the application
BASE_URL="http://localhost"

# Port number for the GraphQL server
PORT="4000"

# Logging Configuration
# Log level for console output and OpenTelemetry structured logging
LOG_LEVEL="info"

# Application Root Directory
CN_ROOT="/usr/src/app"

# Cross-Origin Resource Sharing
# Comma-separated list of allowed origins
ALLOWED_ORIGINS="http://localhost:3000,http://localhost:4000,http://localhost:5173"

# DNS Configuration
BUN_CONFIG_DNS_TIME_TO_LIVE_SECONDS=120

# Development Options
VERBOSE_HTTP=false          # Set to "true" to enable HTTP request/response debugging
BUN_ENV=development        # Enables local time display in logs

# Source Map Configuration
SOURCE_MAP_SUPPORT=true
PRESERVE_SOURCE_MAPS=true

# Yoga Configuration
# Cache TTL for GraphQL responses in milliseconds
YOGA_RESPONSE_CACHE_TTL=900000

# Couchbase Capella Configuration
# External endpoint
COUCHBASE_URL="couchbases://your-cluster.cloud.couchbase.com"
# Internal endpoint example
# COUCHBASE_URL="couchbases://private-endpoint.your-cluster.cloud.couchbase.com"

# Authentication credentials
COUCHBASE_USERNAME="your-username"
COUCHBASE_PASSWORD="your-secure-password"

# Database structure
COUCHBASE_BUCKET="default"
COUCHBASE_SCOPE="_default"
COUCHBASE_COLLECTION="_default"

# OpenTelemetry Configuration

# Enable/disable OpenTelemetry instrumentation
ENABLE_OPENTELEMETRY=true

# Service identification
SERVICE_NAME="CapellaQL Service"
SERVICE_VERSION="2.0"
DEPLOYMENT_ENVIRONMENT="development"

# OpenTelemetry endpoints
TRACES_ENDPOINT="http://localhost:4318/v1/traces"
METRICS_ENDPOINT="http://localhost:4318/v1/metrics"
LOGS_ENDPOINT="http://localhost:4318/v1/logs"

# Monitoring intervals (in milliseconds)
METRIC_READER_INTERVAL=60000
SUMMARY_LOG_INTERVAL=300000

# 2025 OpenTelemetry Compliance Settings
EXPORT_TIMEOUT_MS=30000            # 30 seconds max (2025 standard)
BATCH_SIZE=2048                    # Batch size (2025 standard)
MAX_QUEUE_SIZE=10000              # Max queue size (2025 standard)
SAMPLING_RATE=0.15                # 15% sampling rate (2025 standard)
CIRCUIT_BREAKER_THRESHOLD=5       # Circuit breaker failure threshold
CIRCUIT_BREAKER_TIMEOUT_MS=60000  # Circuit breaker timeout (1 minute)

# === SIMPLIFIED 3-TIER SAMPLING (NEW - RECOMMENDED) ===
# Streamlined approach with just 3 signal types for easier configuration
TRACES_SAMPLING_RATE=0.15   # 15% traces - cost-effective distributed tracing
METRICS_SAMPLING_RATE=0.25  # 25% metrics - higher for performance monitoring
LOGS_SAMPLING_RATE=0.30     # 30% logs - balance visibility and storage costs
COST_OPTIMIZATION_MODE=true        # Enable smart cost optimization features
HEALTH_CHECK_SAMPLING_RATE=0.05    # 5% health checks - reduce noise


# Notes:
# - Copy this file to .env and adjust values for your environment
# - Ensure secure passwords in production
# - Update ALLOWED_ORIGINS based on your deployment needs
# - Adjust OpenTelemetry endpoints according to your monitoring setup
# - Set appropriate logging levels for different environments
# - Use private endpoints in production where applicable
# - Export timeout must not exceed 30 seconds (2025 OpenTelemetry standard)
# - Sampling rate of 15% provides good balance between observability and performance
# - System uses pure OpenTelemetry logging - ENABLE_OPENTELEMETRY=true/false controls all telemetry
# - No file logging capability - all logs go through OpenTelemetry or console fallback
# - Log sampling rates can reduce costs by 40-60% while maintaining error visibility
# - Metric sampling rates enable 50-70% reduction in telemetry costs while preserving critical data
# - Business metrics are never sampled (100%) to ensure accurate KPI tracking
# - Smart retention policies optimize storage costs while meeting compliance requirements
